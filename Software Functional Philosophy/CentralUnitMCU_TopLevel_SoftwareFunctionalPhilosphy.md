Once hardware and BLE initializations are complete on the central unit MCU, it goes into Discovery phase. Initially, there are NO smart bandages registered to the central unit, therefore, it stays in Discovery phase until it finds at least one smart bandage, only then can it issue commands to it.
The smart bandage MCU, once powered ON, will want to register itself to the central unit. It achieves this by continuously sending its device UDN number to the central unit. Let's assume for the purpose of this discussion, that this is the first smart bandage MCU being turned ON, which means that the central unit right now, by default is in Discovery phase. Therefore, the central unit receives the UDN number from the smart bandage MCU, transmits an ACK to the smart bandage signifying successful data reception, and then transmits its OWN UDN number to the smart bandage. A successful smart bandage registration is quantified by both the central unit and the smart bandage as follows:

-	central unit; transmits an ACK after UDN data reception
-	smart bandage; receives central unit UDN data

Once the smart bandage is successfully registered, the smart bandage switches its channel to the UDN number that it just transmitted to the central unit and stays in reception mode till it receives any command from the central unit. The central unit now knows that there is one registered smart bandage, so it issues “START_CALC\r” command to it. The central unit, then waits for 140 seconds for the smart bandage to finish executing the command. It then issues “SEND_DATA\r” command. Once smart bandage receives this command, it sends all the measured data and ML classification data back to the central unit (after central unit sends “SEND_DATA\r” command, it goes to receiving mode in the smart bandage UDN channel). On the smart bandage side, once the data transmission is complete (meaning, the central unit sent an ACK), the ]smart bandage goes back to receiving mode. On the central unit side, it sends the received data to the Edge device for further storage/processing. The central unit then goes back to the discovery phase to register any new smart bandages.

Now, let's talk about adding a new smart bandage to the network; technically as it might be obvious from the aforementioned functional description, at one point in time only _one smart bandage shall be in registration phase_  (just for the purpose of the discussion, lets assume that there are 2 smart bandages in registration phase, meaning that both of them are on same channel(0x4E53554C), transmitting their respective UDN number(s), one of the possible catastrophic outcomes of this is when the first smart bandage is transiting its UDN number the second smart bandage is waiting for an ACK but receives data instead, so the second smart bandage re-transmits its UDN number, but at this point in time, the first smart bandage is waiting for an ACK but receives the second smart bandage UDN number instead, thus both the smart bandages are in DEADLOCK), meaning that all the NO 2 or more NEW smart bandages shall be turned ON simultaneously, the NEXT NEW smart bandage shall be turned ON only when the previous one is successfully registered.

As of now, we have one central unit and one smart bandage happily working together, the central unit is cycling through commands, going to the discovery phase and the smart bandage is successfully performing the commands. Let's say we now want to add a new smart bandage to the network, how do we do it? We can just POWER ON the new smart bandage, the new smart bandage will continue to try register itself to the central unit, but the registration will be successful only when the central unit goes to the discovery phase. When the central unit goes to discovery phase it will register the new smart bandage, and as mentioned above the new smart bandage will go to its UDN number channel and stay in receiving mode till it receives any command from the central unit.

The central unit now has 2 registered smart bandages, so, it issues “START_CALC\r” command to both of them (in a serial manner, by switching to their respective channels) and then it waits for 140 seconds and then issues “SEND_DATA\r” command to the first smart bandage and then transmits the received data from the first smart bandage to the edge unit and then repeats the actions related to “SEND_DATA\r” command with the second smart bandage. The central unit then goes back to the discovery phase to register any new smart bandage.

The stages that the central unit goes through can be summarized as below:
1)	Discovery phase; stay in this phase indefinitely until a smart bandage is registered (number of smart bandages registered to the central unit is 0).
2)	If the number of smart bandages registered is more than 0 
    -  Issue “START_CALC\r” command to all registered smart bandages in their respective channel.
    -  Wait for 140 seconds
    -  Issue “SEND_DATA\r” command to all registered smart bandages in the respective channel and send the received data from each smart bandage to the edge device.
    -  Go to Discovery phase for 5 seconds (reception timeout is set to 5 seconds).
    -  Go back to (step a).

Additionally, a “LOOK_FOR_LEAF leaf UDN number\n command\r” might be transmitted by the central unit MCU. The central unit decides to issue this command if one or a few of the registered smart bandages do not acknowledge the command reception to the central unit. This can happen due to various reasons, for example: the distance between the central unit and the smart bandage(s) has increased or the smart bandage MCU has been POWERED OFF. In either of these cases, the central unit tries to “FIND” the “LOST” smart bandage using the “LOOK_FOR_LEAF leaf UDN number\n command\r” command, if the central unit is still unable to find the “LOST” smart bandage, then it is deemed to be POWERED OFF and thus the “LOST” smart bandage is removed from the list of registered smart bandages, thus, no further commands are issued in the channel pertaining to the “LOST” smart bandage. However, if the smart bandage is POWERED ON at a later instant (let's say it needed a battery change) it is then registered back by the central unit when it is in Discovery phase.

The purpose of introducing this command is to make the network more resilient against intermittent issues and communication collisions. As might be obvious from the top-level description of the system functional philosophy, the central unit acts as the HOST, and all the smart bandages act as SUBORDINATE.

The _role of host_ (central unit) in our design is to _issue commands to the subordinates_ (registered smart bandages) and send the data received at the end of a cycle to the Edge device. The subordinates DON’T perform any task (and simply stay in listening mode) until they receive a command. Once a command is received, the subordinate is busy executing the command and is thus unavailable for any communication. Therefore, the host is also _responsible for maintaining the timing_ for all communication events so that any kind of communication failures can be avoided. For any successful communication, the receiver FIRST shall be in receiving mode and then the sender can send information.

